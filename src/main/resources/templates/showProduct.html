<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/showProduct-style.css" type="text/css">
    <link rel="stylesheet" href="/css/topBar-style.css" type="text/css">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.quilljs.com/1.3.6/quill.core.css">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <title>{{product.name}}</title>
</head>

<header class="header">
    <title>{{product.name}}</title>
</header>

<body>

    <div class="top-bar">
    <div class="logo-container">
        <a href="/"><img src="/images/logo.png"></a>
    </div>

    <div class="searchBar">
        <form action="/searchProduct" method="get">
            <label for="search">
                <input id="search" type="text" name="productName" required="" autocomplete="off" placeholder="Buscar producto">
                <div class="searchIcon">
                    <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="swap-on">
                        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round"></path>
                    </svg>
                </div>
                <button type="reset" class="close-btn">
                    <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" fill-rule="evenodd"></path>
                    </svg>
                </button>
            </label>
        </form>
    </div>
    <div class="top-bar-buttons-container">
        {{#admin}}
        <form action="/newProduct" method="get" class="right-bar-button-content">
            <button class="right-bar-button" id="new-product" type="submit">
                <span>Crear producto</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path>            </svg>
            </button>
        </form>
        {{/admin}}
        <form action="/shoppingCart" method="get" class="right-bar-button-content">
            <button class="right-bar-button" id="cart" type="submit">
                <span>Carrito</span>
                <svg class="top-bar-button-icon" viewBox="0 0 576 512"><path d="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"></path></svg>
            </button>
        </form>
    </div>
</div>
<hr>

    <div class="product">
        <div class="img-container">
            {{#product.containsPhoto}}
            <img src="/product/{{id}}/image">
            {{/product.containsPhoto}}
            {{^product.containsPhoto}}
            <img src="/images/noImage.png">
            {{/product.containsPhoto}}
        </div>
        <div class="product-info">
            <div class="product-text">
                <h2>{{product.name}}</h2>
                <h3>{{product.price}} $</h3>
                <h4>#{{product.type}}</h4>
                <p>Usuarios que lo añadieron a la cesta: <b>{{product.numProductsInCarts}}</b></p>
                <hr>
                <p class="product-description">{{product.description}}</p>
            </div>

            <div class="product-buttons">
                <form method="post" action="/followProduct?id={{id}}">
                    <button class="product-button" id="cart-button" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" class="product-svg" viewBox="0 0 16 16"><path id="cart-path" d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"/></svg>
                    </button>
                </form>

                {{#product.containsFile}}
                <form method="get" action="/product/{{product.id}}/file">
                    <button class="product-button" id="pdf-button" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" class="product-svg" viewBox="0 0 16 16"><path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M4.5 9a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1z"/></svg>
                    </button>
                </form>
                {{/product.containsFile}}

                {{#admin}}
                <form action="/product/{{id}}/edit" method="post">
                    <button class="product-button" id="edit-button" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" class="product-svg" viewBox="0 0 16 16"> <path id="pen-path" d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/></svg>
                    </button>
                </form>

                <form method="post" action="/product/{{id}}/delete">
                    <button class="delete-button" type="submit">
                        <svg viewBox="0 0 448 512" class="svgIcon"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"></path></svg>
                    </button>
                </form>
                {{/admin}}
            </div>
        </div>
    </div>

    <div class="comments-container">
        <div class="comments-title">
            <h3>Comentarios</h3>
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-chat-left-text" viewBox="0 0 16 16">
                <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
                <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
            </svg>
        </div>



        <form action="/product/{{id}}/newComment" method="post">
            <div class="new-comment">
                <div class="modal">
                    <div class="modal__header">
                        <span class="modal__title">Nuevo comentario</span>
                    </div>
                    <div class="modal__body">
                        {{#error}}
                            <p class="error">Datos invalidos</p>
                        {{/error}}
                        <div class="input">
                            <label class="input__label">Nombre</label>
                            <input class="input__field" type="text" name="userName">
                        </div>
                        <div class="input">
                            <label class="input__label">Calificación</label>
                            <input class="input__field" type="number" name="score" min="0" max="10">
                        </div>
                        <div class="input">
                            <label class="input__label">Comentario</label>
                            <div id="editor" class="input_field input_field--textarea" style="min-height: 200px;"></div>
                            <textarea name="opinion" style="display: none;"></textarea>
                            <script src="/js/quill-config.js"></script>
                        </div>
                    </div>
                    <div class="modal__footer">
                        <button class="button button--primary" type="submit">Publicar</button>
                    </div>
                </div>
            </div>
        </form>


        <div style=" display: grid; gap: 2vw">
            {{#commentList}}
            <div class="comment" id="comment-{{CID}}">
                <div class="essentials">
                    <div class="score-container"><h5>{{score}}</h5></div>
                    <div class="unserName-container"><h5>{{userName}}</h5></div>

                    <div class="essentials-form-container"><form action="/product/{{id}}/comment/{{CID}}" method="post">
                        <button class="bin-button">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 69 14" class="svgIcon bin-top">
                                <g clip-path="url(#clip0_35_24)">
                                    <path fill="black" d="M20.8232 2.62734L19.9948 4.21304C19.8224 4.54309 19.4808 4.75 19.1085 4.75H4.92857C2.20246 4.75 0 6.87266 0 9.5C0 12.1273 2.20246 14.25 4.92857 14.25H64.0714C66.7975 14.25 69 12.1273 69 9.5C69 6.87266 66.7975 4.75 64.0714 4.75H49.8915C49.5192 4.75 49.1776 4.54309 49.0052 4.21305L48.1768 2.62734C47.3451 1.00938 45.6355 0 43.7719 0H25.2281C23.3645 0 21.6549 1.00938 20.8232 2.62734ZM64.0023 20.0648C64.0397 19.4882 63.5822 19 63.0044 19H5.99556C5.4178 19 4.96025 19.4882 4.99766 20.0648L8.19375 69.3203C8.44018 73.0758 11.6746 76 15.5712 76H53.4288C57.3254 76 60.5598 73.0758 60.8062 69.3203L64.0023 20.0648Z"></path>
                                </g>
                                <defs>
                                    <clipPath id="clip0_35_24">
                                        <rect></rect>
                                    </clipPath>
                                </defs>
                            </svg>

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 69 57" class="svgIcon bin-bottom">
                                <g clip-path="url(#clip0_35_22)">
                                    <path fill="black" d="M20.8232 -16.3727L19.9948 -14.787C19.8224 -14.4569 19.4808 -14.25 19.1085 -14.25H4.92857C2.20246 -14.25 0 -12.1273 0 -9.5C0 -6.8727 2.20246 -4.75 4.92857 -4.75H64.0714C66.7975 -4.75 69 -6.8727 69 -9.5C69 -12.1273 66.7975 -14.25 64.0714 -14.25H49.8915C49.5192 -14.25 49.1776 -14.4569 49.0052 -14.787L48.1768 -16.3727C47.3451 -17.9906 45.6355 -19 43.7719 -19H25.2281C23.3645 -19 21.6549 -17.9906 20.8232 -16.3727ZM64.0023 1.0648C64.0397 0.4882 63.5822 0 63.0044 0H5.99556C5.4178 0 4.96025 0.4882 4.99766 1.0648L8.19375 50.3203C8.44018 54.0758 11.6746 57 15.5712 57H53.4288C57.3254 57 60.5598 54.0758 60.8062 50.3203L64.0023 1.0648Z"></path>
                                </g>
                                <defs>
                                    <clipPath id="clip0_35_22">
                                        <rect></rect>
                                    </clipPath>
                                </defs>
                            </svg>
                        </button>

                    </form></div>
                </div>
                <div class="text">
                    <p>{{{opinion}}}</p>
                </div>
            </div>
            {{/commentList}}
            {{^commentList}}
            <div class="comment">
                <p>Se el primero en publicar un comentario</p>
            </div>
            {{/commentList}}
            <script src="/js/comment-color.js"></script>
        </div>
    </div>
</body>

</html>


